<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>Creating Hover-Based Pop-Up Info Windows</title>

  <style>
    html {
      box-sizing: border-box;
    }

    *,
    *:before,
    *:after {
      box-sizing: inherit;
    }

    img {
      width: 200px;
      display: inline-block;
    }

    .popup {
      width: 200px;
      text-align: center;
      padding: 0.5em;
      background-color: #ffffff;
      border: 2px solid black;
    }
  </style>
</head>

<body>
  <h1>Creating Hover-Based Pop-Up Info Windows</h1>
  <img src="img/firstimage.jpg" alt="image description" id="0" />
  <img src="img/secondimage.jpg" alt="image description" id="1" />
  <img src="img/thirdimage.jpg" alt="image description" id="2" />

  <script type="text/javascript">
    const data = ['Hello 0', 'Hello 1', 'Hello 2'];

    // compute position for pop up
    function comPos(obj) {
      const rect = obj.getBoundingClientRect();
      let height;
      if (rect.height) {
        height = rect.height;
      } else {
        height = rect.bottom - rect.top;
      }
      const top = rect.top + height + 10;
      return [rect.left, top];
    }

    // process return
    function showWindow(id, response) {
      const img = document.getElementById(id);
      console.log(img);

      // derive location for pop up
      const loc = comPos(img);
      const left = `${loc[0]}px`;
      const top = `${loc[1]}px`;

      console.log(left, top);

      // create pop up
      const div = document.createElement('popup');
      div.id = 'popup';
      const txt = document.createTextNode(response);
      div.appendChild(txt);

      // style popup
      div.setAttribute('class', 'popup');
      div.setAttribute('style', `position: fixed; left: ${left}; top: ${top}`);
      document.body.appendChild(div);
    }

    function getInfo(id) {
      showWindow(id, data[id]);
    }

    function removeWindow() {
      const popup = document.getElementById('popup');
      if (popup) {
        popup.parentNode.removeChild(popup);
      }
    }


// Run the script over the condition
    window.onload = () => {
      const imgs = document.querySelectorAll('img');
      imgs.forEach(img => {
        img.addEventListener(
          'mouseover', () => {
              getInfo(img.id);
          },
          false
        );

        img.addEventListener(
          'mouseout', () => {
            removeWindow();
          },
          false
        )
      });
    };
  </script>
</body>

</html>
